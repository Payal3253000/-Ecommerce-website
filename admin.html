<!DOCTYPE html>
<html>
   <head>
      <!-- Basic -->
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <!-- Mobile Metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
      <!-- Site Metas -->
      <meta name="keywords" content="" />
      <meta name="description" content="" />
      <meta name="author" content="" />
      <link rel="shortcut icon" href="images/favicon.png" type="">
      <title>Famms - Admin Dashboard</title>
      <!-- bootstrap core css -->
      <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
      <!-- font awesome style -->
      <link href="css/font-awesome.min.css" rel="stylesheet" />
      <!-- Custom styles for this template -->
      <link href="css/style.css" rel="stylesheet" />
      <!-- responsive style -->
      <link href="css/responsive.css" rel="stylesheet" />
      <style>
         .admin-section {
            padding: 90px 0;
         }
         .admin-card {
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
         }
         .admin-card h4 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
         }
         .form-group {
            margin-bottom: 20px;
         }
         .form-control {
            border-radius: 5px;
            padding: 10px 15px;
         }
         .btn-admin {
            background-color: #f7444e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
         }
         .btn-admin:hover {
            background-color: #002c3e;
         }
         .product-list {
            margin-top: 30px;
         }
         .product-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            margin-bottom: 15px;
            transition: all 0.3s;
         }
         .product-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
         }
         .product-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            margin-right: 15px;
         }
         .product-info {
            flex-grow: 1;
         }
         .product-actions {
            display: flex;
            gap: 10px;
         }
         .btn-edit, .btn-delete {
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
         }
         .btn-edit {
            background-color: #4e9af7;
            color: white;
         }
         .btn-delete {
            background-color: #f74e4e;
            color: white;
         }
         .category-select {
            margin-bottom: 20px;
         }
      </style>
   </head>
   <body>
      <div class="hero_area">
         <!-- header section strats -->
         <header class="header_section">
            <div class="container">
               <nav class="navbar navbar-expand-lg custom_nav-container ">
                  <a class="navbar-brand" href="index.html"><img width="250" src="images/logo.png" alt="#" /></a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class=""> </span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                     <ul class="navbar-nav">
                        <li class="nav-item">
                           <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="gallery.html">Gallery</a>
                        </li>
                        <li class="nav-item active">
                           <a class="nav-link" href="admin.html">Admin <span class="sr-only">(current)</span></a>
                        </li>
                     </ul>
                  </div>
               </nav>
            </div>
         </header>
         <!-- end header section -->
      </div>
      <!-- admin section -->
      <section class="admin-section">
         <div class="container">
            <div class="heading_container heading_center">
               <h2>
                  Product <span>Management</span>
               </h2>
            </div>
            <div class="row">
               <div class="col-md-6">
                  <div class="admin-card">
                     <h4>Add New Product</h4>
                     <form id="product-form">
                        <div class="form-group">
                           <label for="product-name">Product Name</label>
                           <input type="text" class="form-control" id="product-name" required>
                        </div>
                        <div class="form-group">
                           <label for="product-price">Price ($)</label>
                           <input type="number" step="0.01" class="form-control" id="product-price" required>
                        </div>
                        <div class="form-group">
                           <label for="product-description">Description</label>
                           <textarea class="form-control" id="product-description" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                           <label for="product-image">Image URL</label>
                           <input type="text" class="form-control" id="product-image" required>
                           <small class="form-text text-muted">Enter the path to the image (e.g., images/p1.png)</small>
                        </div>
                        <div class="form-group">
                           <label for="product-category">Category</label>
                           <select class="form-control" id="product-category" required>
                              <option value="">Select Category</option>
                              <option value="clothing">Clothing</option>
                              <option value="electronics">Electronics</option>
                              <option value="accessories">Accessories</option>
                           </select>
                        </div>
                        <input type="hidden" id="product-id" value="">
                        <button type="submit" class="btn-admin" id="save-product">Add Product</button>
                        <button type="button" class="btn-admin" id="cancel-edit" style="display: none; background-color: #888;">Cancel</button>
                     </form>
                  </div>
               </div>
               <div class="col-md-6">
                  <div class="admin-card">
                     <h4>Manage Products</h4>
                     <div class="category-select">
                        <label for="filter-category">Filter by Category:</label>
                        <select class="form-control" id="filter-category">
                           <option value="all">All Categories</option>
                           <option value="clothing">Clothing</option>
                           <option value="electronics">Electronics</option>
                           <option value="accessories">Accessories</option>
                        </select>
                     </div>
                     <div class="product-list" id="product-list">
                        <!-- Products will be loaded here -->
                     </div>
                  </div>
               </div>
            </div>
            
            <!-- Order Management Section -->
            <div class="heading_container heading_center mt-5">
               <h2>
                  Order <span>Management</span>
               </h2>
            </div>
            <div class="row">
               <div class="col-md-12">
                  <div class="admin-card">
                     <h4>Recent Orders</h4>
                     <div class="table-responsive">
                        <table class="table table-striped">
                           <thead>
                              <tr>
                                 <th>Order ID</th>
                                 <th>Customer</th>
                                 <th>Date</th>
                                 <th>Total</th>
                                 <th>Status</th>
                                 <th>Actions</th>
                              </tr>
                           </thead>
                           <tbody id="orders-list">
                              <!-- Orders will be loaded here -->
                           </tbody>
                        </table>
                     </div>
                  </div>
               </div>
         </div>
      </section>
      <!-- end admin section -->

      <!-- footer section -->
      <footer class="footer_section">
         <div class="container">
            <div class="footer-info">
               <div class="col-lg-7 mx-auto px-0">
                  <p>
                     &copy; <span id="displayYear"></span> All Rights Reserved
                  </p>
               </div>
            </div>
         </div>
      </footer>
      <!-- footer section -->
      
      <!-- jQery -->
      <script src="js/jquery-3.4.1.min.js"></script>
      <!-- popper js -->
      <script src="js/popper.min.js"></script>
      <!-- bootstrap js -->
      <script src="js/bootstrap.js"></script>
      <!-- custom js -->
      <script src="js/custom.js"></script>
      <script>
         // Initialize products from localStorage or use default
         let products = JSON.parse(localStorage.getItem('admin_products')) || [
            {
               id: 1,
               name: "Men's T-Shirt",
               price: 29.99,
               image: "images/p1.png",
               category: "clothing",
               description: "Comfortable cotton t-shirt for everyday wear. Available in multiple colors and sizes."
            },
            {
               id: 2,
               name: "Women's Dress",
               price: 49.99,
               image: "images/p2.png",
               category: "clothing",
               description: "Elegant dress perfect for casual and semi-formal occasions. Made with high-quality fabric."
            },
            {
               id: 3,
               name: "Smartphone",
               price: 499.99,
               image: "images/electronics/smartphone.svg",
               category: "electronics",
               description: "Latest smartphone with advanced features, high-resolution camera, and long battery life."
            },
            {
               id: 4,
               name: "Laptop",
               price: 899.99,
               image: "images/electronics/laptop.svg",
               category: "electronics",
               description: "Powerful laptop for work and entertainment with fast processor and high-quality display."
            }
         ];
         
         // Initialize orders from localStorage or use default
         let orders = JSON.parse(localStorage.getItem('admin_orders')) || [
            {
               id: 1001,
               customer: "John Doe",
               date: "2023-06-15",
               total: 79.98,
               status: "Delivered",
               items: [
                  { productId: 1, quantity: 2, price: 29.99 },
                  { productId: 2, quantity: 1, price: 49.99 }
               ]
            },
            {
               id: 1002,
               customer: "Jane Smith",
               date: "2023-06-18",
               total: 499.99,
               status: "Processing",
               items: [
                  { productId: 3, quantity: 1, price: 499.99 }
               ]
            },
            {
               id: 1003,
               customer: "Mike Johnson",
               date: "2023-06-20",
               total: 929.98,
               status: "Shipped",
               items: [
                  { productId: 1, quantity: 1, price: 29.99 },
                  { productId: 4, quantity: 1, price: 899.99 }
               ]
            }
         ];

         // Save products to localStorage
         function saveProducts() {
            localStorage.setItem('admin_products', JSON.stringify(products));
            // Also save to gallery products
            localStorage.setItem('gallery_products', JSON.stringify(products));
         }

         // Load products to the list
         function loadProductList(category = 'all') {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';
            
            let filteredProducts = products;
            if (category !== 'all') {
               filteredProducts = products.filter(product => product.category === category);
            }
            
            if (filteredProducts.length === 0) {
               productList.innerHTML = '<p>No products found.</p>';
               return;
            }
            
            filteredProducts.forEach(product => {
               const productItem = document.createElement('div');
               productItem.className = 'product-item';
               productItem.innerHTML = `
                  <img src="${product.image}" alt="${product.name}" class="product-img">
                  <div class="product-info">
                     <h5>${product.name}</h5>
                     <p>$${product.price.toFixed(2)} - ${product.category}</p>
                  </div>
                  <div class="product-actions">
                     <button class="btn-edit" data-id="${product.id}"><i class="fa fa-edit"></i></button>
                     <button class="btn-delete" data-id="${product.id}"><i class="fa fa-trash"></i></button>
                  </div>
               `;
               productList.appendChild(productItem);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.btn-edit').forEach(button => {
               button.addEventListener('click', function() {
                  const productId = parseInt(this.getAttribute('data-id'));
                  editProduct(productId);
               });
            });
            
            document.querySelectorAll('.btn-delete').forEach(button => {
               button.addEventListener('click', function() {
                  const productId = parseInt(this.getAttribute('data-id'));
                  deleteProduct(productId);
               });
            });
         }

         // Edit product
         function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Fill form with product data
            document.getElementById('product-id').value = product.id;
            document.getElementById('product-name').value = product.name;
            document.getElementById('product-price').value = product.price;
            document.getElementById('product-category').value = product.category;
            document.getElementById('product-image').value = product.image;
            document.getElementById('product-description').value = product.description;
            
            // Change button text
            document.getElementById('save-product').textContent = 'Update Product';
            document.getElementById('cancel-edit').style.display = 'inline-block';
            
            // Scroll to form
            document.querySelector('.admin-card').scrollIntoView({ behavior: 'smooth' });
         }

         // Delete product
         function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
               products = products.filter(p => p.id !== productId);
               saveProducts();
               loadProductList(document.getElementById('filter-category').value);
            }
         }

         // Handle form submission
         document.getElementById('product-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const productId = document.getElementById('product-id').value;
            const name = document.getElementById('product-name').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const category = document.getElementById('product-category').value;
            const image = document.getElementById('product-image').value;
            const description = document.getElementById('product-description').value;
            
            if (productId) {
               // Update existing product
               const index = products.findIndex(p => p.id === parseInt(productId));
               if (index !== -1) {
                  products[index] = {
                     id: parseInt(productId),
                     name,
                     price,
                     category,
                     image,
                     description
                  };
               }
            } else {
               // Add new product
               const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
               products.push({
                  id: newId,
                  name,
                  price,
                  category,
                  image,
                  description
               });
            }
            
            // Save and reload
            saveProducts();
            loadProductList(document.getElementById('filter-category').value);
            
            // Reset form
            this.reset();
            document.getElementById('product-id').value = '';
            document.getElementById('save-product').textContent = 'Add Product';
            document.getElementById('cancel-edit').style.display = 'none';
         });
         
         // Handle cancel edit
         document.getElementById('cancel-edit').addEventListener('click', function() {
            document.getElementById('product-form').reset();
            document.getElementById('product-id').value = '';
            document.getElementById('save-product').textContent = 'Add Product';
            this.style.display = 'none';
         });
         
         // Handle category filter change
         document.getElementById('filter-category').addEventListener('change', function() {
            loadProductList(this.value);
         });
         
         // Save orders to localStorage
         function saveOrders() {
            localStorage.setItem('admin_orders', JSON.stringify(orders));
         }
         
         // Load orders to the list
         function loadOrdersList() {
            const ordersList = document.getElementById('orders-list');
            ordersList.innerHTML = '';
            
            if (orders.length === 0) {
               ordersList.innerHTML = '<tr><td colspan="6">No orders found.</td></tr>';
               return;
            }
            
            orders.forEach(order => {
               const orderRow = document.createElement('tr');
               orderRow.innerHTML = `
                  <td>#${order.id}</td>
                  <td>${order.customer}</td>
                  <td>${order.date}</td>
                  <td>$${order.total.toFixed(2)}</td>
                  <td><span class="badge ${getStatusBadgeClass(order.status)}">${order.status}</span></td>
                  <td>
                     <button class="btn btn-sm btn-info view-order" data-id="${order.id}">View</button>
                     <button class="btn btn-sm btn-success update-status" data-id="${order.id}">Update</button>
                  </td>
               `;
               ordersList.appendChild(orderRow);
            });
            
            // Add event listeners to order buttons
            document.querySelectorAll('.view-order').forEach(button => {
               button.addEventListener('click', function() {
                  const orderId = parseInt(this.getAttribute('data-id'));
                  viewOrder(orderId);
               });
            });
            
            document.querySelectorAll('.update-status').forEach(button => {
               button.addEventListener('click', function() {
                  const orderId = parseInt(this.getAttribute('data-id'));
                  updateOrderStatus(orderId);
               });
            });
         }
         
         // Get appropriate badge class based on status
         function getStatusBadgeClass(status) {
            switch(status) {
               case 'Processing': return 'bg-warning text-dark';
               case 'Shipped': return 'bg-info text-white';
               case 'Delivered': return 'bg-success text-white';
               case 'Cancelled': return 'bg-danger text-white';
               default: return 'bg-secondary text-white';
            }
         }
         
         // View order details
         function viewOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            let itemsHtml = '';
            let totalItems = 0;
            
            order.items.forEach(item => {
               const product = products.find(p => p.id === item.productId);
               if (product) {
                  itemsHtml += `
                     <tr>
                        <td>${product.name}</td>
                        <td>${item.quantity}</td>
                        <td>$${item.price.toFixed(2)}</td>
                        <td>$${(item.quantity * item.price).toFixed(2)}</td>
                     </tr>
                  `;
                  totalItems += item.quantity;
               }
            });
            
            const modalHtml = `
               <div class="modal fade" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="orderModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                     <div class="modal-content">
                        <div class="modal-header">
                           <h5 class="modal-title" id="orderModalLabel">Order #${order.id} Details</h5>
                           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                           </button>
                        </div>
                        <div class="modal-body">
                           <div class="row mb-3">
                              <div class="col-md-6">
                                 <p><strong>Customer:</strong> ${order.customer}</p>
                                 <p><strong>Order Date:</strong> ${order.date}</p>
                              </div>
                              <div class="col-md-6">
                                 <p><strong>Status:</strong> <span class="badge ${getStatusBadgeClass(order.status)}">${order.status}</span></p>
                                 <p><strong>Total:</strong> $${order.total.toFixed(2)}</p>
                              </div>
                           </div>
                           <h6>Order Items (${totalItems} items)</h6>
                           <div class="table-responsive">
                              <table class="table table-bordered">
                                 <thead>
                                    <tr>
                                       <th>Product</th>
                                       <th>Quantity</th>
                                       <th>Price</th>
                                       <th>Subtotal</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    ${itemsHtml}
                                 </tbody>
                                 <tfoot>
                                    <tr>
                                       <th colspan="3" class="text-right">Total:</th>
                                       <th>$${order.total.toFixed(2)}</th>
                                    </tr>
                                 </tfoot>
                              </table>
                           </div>
                        </div>
                        <div class="modal-footer">
                           <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                     </div>
                  </div>
               </div>
            `;
            
            // Remove any existing modal
            const existingModal = document.getElementById('orderModal');
            if (existingModal) {
               existingModal.remove();
            }
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            
            // Show modal
            $('#orderModal').modal('show');
         }
         
         // Update order status
         function updateOrderStatus(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const statuses = ['Processing', 'Shipped', 'Delivered', 'Cancelled'];
            const currentIndex = statuses.indexOf(order.status);
            const nextIndex = (currentIndex + 1) % statuses.length;
            
            order.status = statuses[nextIndex];
            saveOrders();
            loadOrdersList();
         }
            loadProductList(document.getElementById('filter-category').value);
         });
         
         // Initialize the page
         document.addEventListener('DOMContentLoaded', function() {
            loadProductList();
            loadOrdersList();
         });
            
            </script>
   </body>
</html>

         // Cancel edit
         document.getElementById('cancel-edit').addEventListener('click', function() {
            resetForm();
         });

         // Reset form
         function resetForm() {
            document.getElementById('product-form').reset();
            document.getElementById('product-id').value = '';
            document.getElementById('save-product').textContent = 'Add Product';
            document.getElementById('cancel-edit').style.display = 'none';
         }

         // Filter by category
         document.getElementById('filter-category').addEventListener('change', function() {
            loadProductList(this.value);
         });

         // Load products on page load
         document.addEventListener('DOMContentLoaded', function() {
            loadProductList();
         });
      </script>
   </body>
</html>
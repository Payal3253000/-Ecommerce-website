<!DOCTYPE html>
<html>
   <head>
      <!-- Basic -->
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <!-- Mobile Metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
      <!-- Site Metas -->
      <meta name="keywords" content="" />
      <meta name="description" content="" />
      <meta name="author" content="" />
      <link rel="shortcut icon" href="images/favicon.png" type="">
      <title>Famms - Order History</title>
      <!-- bootstrap core css -->
      <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
      <!-- font awesome style -->
      <link href="css/font-awesome.min.css" rel="stylesheet" />
      <!-- Custom styles for this template -->
      <link href="css/style.css" rel="stylesheet" />
      <!-- responsive style -->
      <link href="css/responsive.css" rel="stylesheet" />
      <style>
         .order-section {
            padding: 90px 0;
         }
         .order-card {
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
         }
         .order-card h4 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
         }
         .order-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            margin-bottom: 15px;
            transition: all 0.3s;
         }
         .order-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
         }
         .order-details {
            flex-grow: 1;
         }
         .order-actions {
            display: flex;
            gap: 10px;
         }
         .btn-track {
            background-color: #f7444e;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
         }
         .btn-track:hover {
            background-color: #002c3e;
         }
         .tracking-info {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
         }
         .tracking-timeline {
            position: relative;
            padding-left: 30px;
         }
         .tracking-timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            height: 100%;
            width: 2px;
            background-color: #ddd;
         }
         .timeline-item {
            position: relative;
            padding-bottom: 20px;
         }
         .timeline-item::before {
            content: '';
            position: absolute;
            left: -30px;
            top: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #f7444e;
         }
         .timeline-item.completed::before {
            background-color: #28a745;
         }
         .timeline-item.pending::before {
            background-color: #ffc107;
         }
         .timeline-date {
            font-size: 0.8rem;
            color: #666;
         }
         .no-orders {
            text-align: center;
            padding: 30px;
            background-color: #f9f9f9;
            border-radius: 5px;
         }
         .badge {
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: normal;
         }
         .badge-processing {
            background-color: #ffc107;
            color: #212529;
         }
         .badge-shipped {
            background-color: #17a2b8;
            color: white;
         }
         .badge-delivered {
            background-color: #28a745;
            color: white;
         }
         .badge-cancelled {
            background-color: #dc3545;
            color: white;
         }
      </style>
   </head>
   <body class="sub_page">
      <div class="hero_area">
         <!-- header section strats -->
         <header class="header_section">
            <div class="container">
               <nav class="navbar navbar-expand-lg custom_nav-container ">
                  <a class="navbar-brand" href="index.html"><img width="250" src="images/logo.png" alt="#" /></a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                  <span class=""> </span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarSupportedContent">
                     <ul class="navbar-nav">
                        <li class="nav-item">
                           <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item dropdown">
                           <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true"> <span class="nav-label">Pages <span class="caret"></span></a>
                           <ul class="dropdown-menu">
                              <li><a href="about.html">About</a></li>
                              <li><a href="testimonial.html">Testimonial</a></li>
                           </ul>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="product.html">Products</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="blog_list.html">Blog</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                        <li class="nav-item active">
                           <a class="nav-link" href="order.html">Orders</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="cart.html">
                              <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029;" xml:space="preserve">
                                 <g>
                                    <g>
                                       <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                                          c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z" />
                                    </g>
                                 </g>
                                 <g>
                                    <g>
                                       <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                                          C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                                          c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                                          C457.728,97.71,450.56,86.958,439.296,84.91z" />
                                    </g>
                                 </g>
                                 <g>
                                    <g>
                                       <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                                          c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z" />
                                    </g>
                                 </g>
                              </svg>
                              <span id="cart-count" class="badge badge-danger">0</span>
                           </a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="wishlist.html">
                              <i class="fa fa-heart" aria-hidden="true"></i>
                           </a>
                        </li>
                        <form class="form-inline">
                           <button class="btn my-2 my-sm-0 nav_search-btn" type="submit">
                           <i class="fa fa-search" aria-hidden="true"></i>
                           </button>
                        </form>
                     </ul>
                  </div>
               </nav>
            </div>
         </header>
         <!-- end header section -->
      </div>
      <!-- inner page section -->
      <section class="inner_page_head">
         <div class="container_fuild">
            <div class="row">
               <div class="col-md-12">
                  <div class="full">
                     <h3>My Orders</h3>
                  </div>
               </div>
            </div>
         </div>
      </section>
      <!-- end inner page section -->
      
      <!-- order section -->
      <section class="order-section">
         <div class="container">
            <div class="row">
               <div class="col-md-12">
                  <div class="order-card">
                     <h4>Order History</h4>
                     <div id="order-list">
                        <!-- Orders will be loaded here -->
                     </div>
                  </div>
               </div>
            </div>
            
            <div class="row">
               <div class="col-md-12">
                  <div class="order-card">
                     <h4>Order Tracking</h4>
                     <div class="form-group">
                        <label for="tracking-number">Enter Order ID to Track</label>
                        <div class="input-group">
                           <input type="text" class="form-control" id="tracking-number" placeholder="e.g., 1001">
                           <div class="input-group-append">
                              <button class="btn btn-track" id="track-order">Track Order</button>
                           </div>
                        </div>
                     </div>
                     <div id="tracking-result" class="tracking-info">
                        <!-- Tracking info will be displayed here -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
      <!-- end order section -->
      
      <!-- footer section -->
      <footer class="footer_section">
         <div class="container">
            <div class="row">
               <div class="col-md-4 footer-col">
                  <div class="footer_contact">
                     <h4>
                        Reach at..
                     </h4>
                     <div class="contact_link_box">
                        <a href="">
                        <i class="fa fa-map-marker" aria-hidden="true"></i>
                        <span>
                        Location
                        </span>
                        </a>
                        <a href="">
                        <i class="fa fa-phone" aria-hidden="true"></i>
                        <span>
                        Call +01 1234567890
                        </span>
                        </a>
                        <a href="">
                        <i class="fa fa-envelope" aria-hidden="true"></i>
                        <span>
                        demo@gmail.com
                        </span>
                        </a>
                     </div>
                  </div>
               </div>
               <div class="col-md-4 footer-col">
                  <div class="footer_detail">
                     <a href="index.html" class="footer-logo">
                     Famms
                     </a>
                     <p>
                        Necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with
                     </p>
                     <div class="footer_social">
                        <a href="">
                        <i class="fa fa-facebook" aria-hidden="true"></i>
                        </a>
                        <a href="">
                        <i class="fa fa-twitter" aria-hidden="true"></i>
                        </a>
                        <a href="">
                        <i class="fa fa-linkedin" aria-hidden="true"></i>
                        </a>
                        <a href="">
                        <i class="fa fa-instagram" aria-hidden="true"></i>
                        </a>
                        <a href="">
                        <i class="fa fa-pinterest" aria-hidden="true"></i>
                        </a>
                     </div>
                  </div>
               </div>
               <div class="col-md-4 footer-col">
                  <div class="map_container">
                     <div class="map">
                        <div id="googleMap"></div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="footer-info">
               <div class="col-lg-7 mx-auto px-0">
                  <p>
                     &copy; <span id="displayYear"></span> All Rights Reserved By
                     <a href="https://html.design/">Free Html Templates</a>
                  </p>
               </div>
            </div>
         </div>
      </footer>
      <!-- footer section -->
      
      <!-- jQery -->
      <script src="js/jquery-3.4.1.min.js"></script>
      <!-- popper js -->
      <script src="js/popper.min.js"></script>
      <!-- bootstrap js -->
      <script src="js/bootstrap.js"></script>
      <!-- custom js -->
      <script src="js/custom.js"></script>
      <!-- cart js -->
      <script src="js/cart.js"></script>
      <script>
         // Initialize orders from localStorage or use default
         let userOrders = JSON.parse(localStorage.getItem('user_orders')) || [
            {
               id: 1001,
               customer: "John Doe",
               date: "2023-06-15",
               total: 79.98,
               status: "Delivered",
               items: [
                  { productId: 1, quantity: 2, price: 29.99 },
                  { productId: 2, quantity: 1, price: 49.99 }
               ],
               tracking: [
                  { date: "2023-06-15", status: "Order Placed", description: "Your order has been placed successfully", completed: true },
                  { date: "2023-06-16", status: "Processing", description: "Your order is being processed", completed: true },
                  { date: "2023-06-17", status: "Shipped", description: "Your order has been shipped", completed: true },
                  { date: "2023-06-20", status: "Delivered", description: "Your order has been delivered", completed: true }
               ]
            },
            {
               id: 1002,
               customer: "John Doe",
               date: "2023-06-18",
               total: 499.99,
               status: "Processing",
               items: [
                  { productId: 3, quantity: 1, price: 499.99 }
               ],
               tracking: [
                  { date: "2023-06-18", status: "Order Placed", description: "Your order has been placed successfully", completed: true },
                  { date: "2023-06-19", status: "Processing", description: "Your order is being processed", completed: true },
                  { date: "2023-06-20", status: "Shipped", description: "Your order has been shipped", completed: false },
                  { date: "2023-06-22", status: "Delivered", description: "Your order has been delivered", completed: false }
               ]
            }
         ];
         
         // Get products from localStorage
         const products = JSON.parse(localStorage.getItem('gallery_products')) || [];
         
         // Load orders to the list
         function loadOrderList() {
            const orderList = document.getElementById('order-list');
            orderList.innerHTML = '';
            
            if (userOrders.length === 0) {
               orderList.innerHTML = '<div class="no-orders"><p>You have no orders yet.</p><a href="product.html" class="btn btn-track">Start Shopping</a></div>';
               return;
            }
            
            userOrders.forEach(order => {
               const orderItem = document.createElement('div');
               orderItem.className = 'order-item';
               
               // Get badge class based on status
               let badgeClass = '';
               switch(order.status) {
                  case 'Processing': badgeClass = 'badge-processing'; break;
                  case 'Shipped': badgeClass = 'badge-shipped'; break;
                  case 'Delivered': badgeClass = 'badge-delivered'; break;
                  case 'Cancelled': badgeClass = 'badge-cancelled'; break;
               }
               
               orderItem.innerHTML = `
                  <div class="order-details">
                     <h5>Order #${order.id}</h5>
                     <p>Date: ${order.date}</p>
                     <p>Total: $${order.total.toFixed(2)}</p>
                     <p>Status: <span class="badge ${badgeClass}">${order.status}</span></p>
                  </div>
                  <div class="order-actions">
                     <button class="btn-track view-details" data-id="${order.id}">View Details</button>
                     <button class="btn-track track-order" data-id="${order.id}">Track Order</button>
                  </div>
               `;
               orderList.appendChild(orderItem);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.view-details').forEach(button => {
               button.addEventListener('click', function() {
                  const orderId = parseInt(this.getAttribute('data-id'));
                  viewOrderDetails(orderId);
               });
            });
            
            document.querySelectorAll('.track-order').forEach(button => {
               button.addEventListener('click', function() {
                  const orderId = parseInt(this.getAttribute('data-id'));
                  trackOrder(orderId);
               });
            });
         }
         
         // View order details
         function viewOrderDetails(orderId) {
            const order = userOrders.find(o => o.id === orderId);
            if (!order) return;
            
            let itemsHtml = '';
            let totalItems = 0;
            
            order.items.forEach(item => {
               const product = products.find(p => p.id === item.productId) || { name: `Product #${item.productId}` };
               itemsHtml += `
                  <tr>
                     <td>${product.name}</td>
                     <td>${item.quantity}</td>
                     <td>$${item.price.toFixed(2)}</td>
                     <td>$${(item.quantity * item.price).toFixed(2)}</td>
                  </tr>
               `;
               totalItems += item.quantity;
            });
            
            const modalHtml = `
               <div class="modal fade" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="orderModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                     <div class="modal-content">
                        <div class="modal-header">
                           <h5 class="modal-title" id="orderModalLabel">Order #${order.id} Details</h5>
                           <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                           </button>
                        </div>
                        <div class="modal-body">
                           <div class="row mb-3">
                              <div class="col-md-6">
                                 <p><strong>Order Date:</strong> ${order.date}</p>
                              </div>
                              <div class="col-md-6">
                                 <p><strong>Status:</strong> <span class="badge ${getBadgeClass(order.status)}">${order.status}</span></p>
                                 <p><strong>Total:</strong> $${order.total.toFixed(2)}</p>
                              </div>
                           </div>
                           <h6>Order Items (${totalItems} items)</h6>
                           <div class="table-responsive">
                              <table class="table table-bordered">
                                 <thead>
                                    <tr>
                                       <th>Product</th>
                                       <th>Quantity</th>
                                       <th>Price</th>
                                       <th>Subtotal</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    ${itemsHtml}
                                 </tbody>
                                 <tfoot>
                                    <tr>
                                       <th colspan="3" class="text-right">Total:</th>
                                       <th>$${order.total.toFixed(2)}</th>
                                    </tr>
                                 </tfoot>
                              </table>
                           </div>
                        </div>
                        <div class="modal-footer">
                           <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                           <button type="button" class="btn btn-track" onclick="trackOrder(${order.id})">Track Order</button>
                        </div>
                     </div>
                  </div>
               </div>
            `;
            
            // Remove any existing modal
            const existingModal = document.getElementById('orderModal');
            if (existingModal) {
               existingModal.remove();
            }
            
            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            
            // Show modal
            $('#orderModal').modal('show');
         }
         
         // Track order
         function trackOrder(orderId) {
            document.getElementById('tracking-number').value = orderId;
            document.getElementById('track-order').click();
            
            // Scroll to tracking section
            document.querySelector('.order-card:nth-child(2)').scrollIntoView({ behavior: 'smooth' });
         }
         
         // Get badge class based on status
         function getBadgeClass(status) {
            switch(status) {
               case 'Processing': return 'badge-processing';
               case 'Shipped': return 'badge-shipped';
               case 'Delivered': return 'badge-delivered';
               case 'Cancelled': return 'badge-cancelled';
               default: return '';
            }
         }
         
         // Handle track order button click
         document.getElementById('track-order').addEventListener('click', function() {
            const trackingNumber = document.getElementById('tracking-number').value.trim();
            const trackingResult = document.getElementById('tracking-result');
            
            if (!trackingNumber) {
               trackingResult.innerHTML = '<div class="alert alert-danger">Please enter a valid order ID.</div>';
               trackingResult.style.display = 'block';
               return;
            }
            
            const order = userOrders.find(o => o.id === parseInt(trackingNumber));
            
            if (!order) {
               trackingResult.innerHTML = '<div class="alert alert-danger">Order not found. Please check the order ID and try again.</div>';
               trackingResult.style.display = 'block';
               return;
            }
            
            let trackingHtml = `
               <h5>Order #${order.id} Tracking</h5>
               <p>Current Status: <span class="badge ${getBadgeClass(order.status)}">${order.status}</span></p>
               <div class="tracking-timeline">
            `;
            
            order.tracking.forEach(step => {
               trackingHtml += `
                  <div class="timeline-item ${step.completed ? 'completed' : 'pending'}">
                     <div class="timeline-date">${step.date}</div>
                     <div class="timeline-content">
                        <h6>${step.status}</h6>
                        <p>${step.description}</p>
                     </div>
                  </div>
               `;
            });
            
            trackingHtml += '</div>';
            
            trackingResult.innerHTML = trackingHtml;
            trackingResult.style.display = 'block';
         });
         
         // Initialize the page
         document.addEventListener('DOMContentLoaded', function() {
            loadOrderList();
            updateCartCount();
         });
      </script>
   </body>
</html>